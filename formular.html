<!DOCTYPE html>
<html lang="de">  
    <head>  
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css">
        <link rel="stylesheet" href="styles.css" /> 
        <script>
          document.addEventListener("DOMContentLoaded", function() {
              fetch('header.html')
                  .then(response => response.text())
                  .then(data => {
                      document.querySelector('header').innerHTML = data;
                  });
  
              fetch('footer.html')
                  .then(response => response.text())
                  .then(data => {
                      document.querySelector('footer').innerHTML = data;
                  });

              fetch("navigation.html") 
                  .then(response => response.text()) 
                  .then(data => { document.getElementById("navigation").innerHTML = data; 
                  });
          });
      </script>


    </head>

<body>

    <header></header>


<div class="complete-content">
    <div id="navigation"></div>
    <main class="main-container">
        <section class="section">
            <div class="container">
                <h3 class="title is-3 is-size-4-mobile">Unsere Geschäftstelle befindet sich hier:</h3>
                <h5 class="title is-5 is-size-6-mobile">Hilfestraße 5<br>90471 Nürnberg</h5>
                <h4 class="title is-4 is-size-5-mobile">Sie können Ihre Spende entweder direkt bei unserer Geschäftstelle abgeben oder Sie lassen Ihre Spende bequem von unserem Sammelfahrzeug bei Ihnen zu Hause abholen.</h4>
                
                <form>
                    <div class="field">
                        <label class="label" for="Abgabe">Abgabe:</label>
                        <div class="control">
                            <div class="select">
                                <select id="Abgabe" name="Abgabe:" oninput="checkInput()">
                                    <option value="">Bitte wählen</option>
                                    <option value="geschäftsstelle">Übergabe an der Geschäftsstelle</option>
                                    <option value="sammelfahrzeug">Abholung durch Sammelfahrzeug</option>
                                </select>
                            </div>
                        </div>
                    </div>

                        <div id="AbholerContainer" class="field hidden">
                            <label class="label" for="Anrede">Anrede:</label>
                            <div class="control mb-5">
                                <div class="select">
                                    <select id="Anrede" name="Anrede">
                                        <option value="">Bitte wählen</option>
                                        <option value="Herr">Herr</option>
                                        <option value="Frau">Frau</option>
                                        <option value="Divers">Divers</option>
                                    </select>
                                </div>
                            </div>

                            <div class="columns">
                                <div class="column is-half">
                                    <div class="field">
                                        <label class="label" for="Nachname">Nachname:</label>
                                        <div class="control">
                                            <input class="input" type="text" name="Nachname" id="Nachname" placeholder="Nachname">
                                        </div>
                                    </div>
                                </div>
                                <div class="column is-half">
                                    <div class="field">
                                        <label class="label" for="Vorname">Vorname:</label>
                                        <div class="control">
                                            <input class="input" type="text" name="Vorname" id="Vorname" placeholder="Vorname">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                                    <div class="field">
                                        <label class="label" for="email">Email-Adresse:</label>
                                        <div class="control">
                                            <input class="input" type="email" name="email" id="email" placeholder="Email-Adresse">
                                        </div>
                                      </div>

                              <div class="columns">   
                                <div class="column is-half">
                                    <div class="field">
                                        <label class="label" for="Straße">Straße:</label>
                                        <div class="control">
                                            <input class="input" type="text" name="Straße" id="Straße" placeholder="Straße">
                                        </div>
                                    </div>
                                </div>
                                <div class="column is-half">
                                    <div class="field">
                                        <label class="label" for="Hausnummer">Hausnummer:</label>
                                        <div class="control">
                                            <input class="input" type="number" name="Hausnummer" id="Hausnummer" placeholder="Hausnummer">
                                        </div>
                                    </div>
                                </div>
                              </div>
                                
                              <div class="columns">
                                <div class="column is-half">
                                  <div class="field">
                                    <form onsubmit="vergleichen(event);">
                                      <label class="label" for="Postleitzahl">Postleitzahl</label>
                                      <div class="control">
                                        <input class="input" type="number" id="Postleitzahl" name="Postleitzahl" placeholder="Postleitzahl" required>
                                      </div>
                                      <div class="control">
                                        <button class="button is-primary" type="submit" id="Plz prüfen">Plz prüfen</button>
                                      </div>
                                    </form>
                                  </div>
                                </div>
                                <div class="column is-half">
                                    <div class="field">
                                        <label class="label" for="Ort">Ort:</label>
                                        <div class="control">
                                            <input class="input" type="text" id="Ort" name="Ort" placeholder="Ort">
                                        </div>
                                    </div>
                                </div>
                              </div>
                            
                        </div>

                        <div id="GeschäftsstelleContainer" class="field hidden">
                            <div class="columns">
                                <div class="column is-half">
                                    <div class="field">
                                        <label class="label" for="Kleiderart">Art der Kleidung:</label>
                                        <div class="control">
                                            <div class="select">
                                                <select id="Kleiderart" name="Kleiderart">
                                                    <option value="">Bitte wählen</option>
                                                    <option value="schuhe">Schuhe</option>
                                                    <option value="jacke">Jacken, Mäntel etc.</option>
                                                    <option value="hose">Hosen etc.</option>
                                                    <option value="oberteil">Pulli, Bluse, Hemden etc.</option>
                                                    <option value="kleider">Kleider, Röcke etc.</option>
                                                    <option value="hut">Kopfbedekungen (Hut, Mütze, Capy etc.)</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="column is-half">
                                    <div class="field">
                                        <label class="label" for="krisenregion">Wähle eine Krisenregion:</label>
                                        <div class="control">
                                            <div class="select">
                                                <select id="Krisenregion" title="TabelleKrisenregionen" name="Krisenregion"></select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="control">
                                <button class="button is-primary" type="submit" id="Kleiderspende registrieren">Kleiderspende registrieren</button>
                            </div>
                    </div>
                      
                </form>
            </div>
        </section>
    </main>
</div>

    


<footer></footer>
<script>
    // Funktion zum Laden der Tabelle und Extrahieren der Werte
    async function loadTableData() {
        const response = await fetch('krisenregion.html');
        const text = await response.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(text, 'text/html');
        const rows = doc.querySelectorAll('#dataKrisenregion tr');
        const dropdown = document.getElementById('Krisenregion');

        for (let i = 1; i < rows.length; i++) {
                const cell = rows[i].cells[0];
                const option = document.createElement('option');
                option.textContent = cell.textContent;
                dropdown.appendChild(option);
        };
    }

    // Tabelle laden, wenn das Dokument geladen ist
    document.addEventListener('DOMContentLoaded', loadTableData);
</script>

<script> //Script zum optionalen Einblenden von Name und Adresse, jenachdem ob Geschäftstelle oder Abholung ausgewählt wurde
    document.addEventListener('DOMContentLoaded', function() { 
        const abgabeSelect = document.getElementById('Abgabe'); 
        const AbholerContainer = document.getElementById('AbholerContainer'); 
        const GeschäftsstelleContainer = document.getElementById('GeschäftsstelleContainer');
        abgabeSelect.addEventListener('change', 
        function() { 
            if (abgabeSelect.value === 'sammelfahrzeug') { 
                AbholerContainer.classList.remove('hidden'); 
                GeschäftsstelleContainer.classList.remove('hidden'); 
            } else if (abgabeSelect.value === 'geschäftsstelle') {
                GeschäftsstelleContainer.classList.remove('hidden');
            }
              else { 
                AbholerContainer.classList.add('hidden');
                GeschäftsstelleContainer.classList.add('hidden') ;
                    } 
                }); 
            }); 
</script>

<script>
    function vergleichen(event) {
        event.preventDefault();
        // Hole den Wert des Eingabefeldes
        let eingabe = document.getElementById("Postleitzahl").value;
        
        if (eingabe.length < 5 || eingabe.length > 5 ) {
            alert ("Bitte eine gültige Postleitzahl eingeben"); 
            return;
        }
        // Extrahiere die ersten zwei Zahlen
        let ersteZweiZahlen = eingabe.substring(0, 2);
        
        // Feste Werte zum Vergleichen
        let wert1 = "90";
        
        // Vergleiche und zeige entsprechende Meldung
        if (ersteZweiZahlen === wert1) {
            alert("Die angegebene Adresse liegt in der Nähe unserer Geschäftstelle. Bitte bringen Sie Ihre Spende direkt dorthin.");
        
        } else {
            alert("Das Sammelfahrzeug kommt zu Ihnen!");
        }
    }
    document.getElementById('Plz prüfen').addEventListener('click', vergleichen)
</script>

<script> //zum Öffnen des neuen Fensters
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('Kleiderspende registrieren').addEventListener('click', function(event) {
            event.preventDefault();
            // Erfasse die Eingabewerte
            const Anrede = document.getElementById('Anrede').value;
            const Nachname = document.getElementById('Nachname').value;
            const Vorname = document.getElementById('Vorname').value;
            const email = document.getElementById('email').value;
            const Straße = document.getElementById('Straße').value;
            const Hausnummer = document.getElementById('Hausnummer').value;
            const Postleitzahl = document.getElementById('Postleitzahl').value;
            const Ort = document.getElementById('Ort').value || 'Nürnberg';
            // Erfasse den angezeigten Namen der ausgewählten Option im Dropdown-Feld 
            const Kleiderart = document.getElementById('Kleiderart');
            const selectedOption = Kleiderart.options[Kleiderart.selectedIndex].text;
            const Krisenregion = document.getElementById('Krisenregion').value;
            
            // Erfasse das aktuelle Datum und die Uhrzeit ohne Sekunden 
            const now = new Date(); 
            const options = { year: 'numeric', month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric' }; 
            const dateTimeString = now.toLocaleString('de-DE', options);

            // Erstelle eine neue Seite mit den Eingabewerten
            let newPageContent = `
               <title>Übersicht Ihrer Eingaben</title>
                
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css">
                <link rel="stylesheet" href="styles.css" /> 

              <div class="zusammenfassung-container">
                <h1 class="title">Übersicht Ihrer Eingaben</h1>`;
            if (Anrede) {
                newPageContent += `<p><strong>Anrede:</strong> ${Anrede}</p>`;}
            if (Nachname) {
                newPageContent += `<p><strong>Nachname:</strong> ${Nachname}</p>`;}
            if (Vorname) {
                newPageContent += `<p><strong>Vorname:</strong> ${Vorname}</p>`;}
            if (email) {
                newPageContent += `<p><strong>E-Mail:</strong> ${email}</p>`;}
            if (Straße) {
                newPageContent += `<p><strong>Straße:</strong> ${Straße}</p>`;}
            if (Hausnummer) {
                newPageContent += `<p><strong>Hausnummer:</strong> ${Hausnummer}</p>`;}
            if (Postleitzahl) {
                newPageContent += `<p><strong>Postleitzahl:</strong> ${Postleitzahl}</p>`;}
            if (Ort) {
                newPageContent += `<p><strong>Ort:</strong> ${Ort}</p>`; }
            if (selectedOption) {
                newPageContent += `<p><strong>Kleiderart:</strong> ${selectedOption}</p>`;}
            if (Krisenregion) {
                newPageContent += `<p><strong>Krisenregion:</strong> ${Krisenregion}</p>`;}
            // Füge Ort, Datum und Uhrzeit am Ende der Zusammenfassung hinzu 
                newPageContent += `<p><strong>${Ort}, den ${dateTimeString.split(', ')[0]} um ${dateTimeString.split(', ')[1]} Uhr</strong></p>`;
                newPageContent += '<p><strong>Vielen Dank für Ihre Spende!</strong></p>'
                newPageContent += `
              </div>`;

           // Öffne eine neue Seite und füge den Inhalt hinzu 
            const newWindow = window.open('', '', 'width=600,height=600'); 
            newWindow.document.write(newPageContent); 
            newWindow.document.close();
        });
    });
</script>

  
  
</body>
</html>
