<!DOCTYPE html>
<html lang="de">  
    <head>  
     <script>
            document.addEventListener("DOMContentLoaded", function() {
                fetch('header.html')
                    .then(response => response.text())
                    .then(data => {
                        document.querySelector('header').innerHTML = data;
                    });
    
                fetch('footer.html')
                    .then(response => response.text())
                    .then(data => {
                        document.querySelector('footer').innerHTML = data;
                    });
            });
        </script>

        <style>.hidden{ display: none;}</style>


    </head>

<body>

    <header></header>

    <main>
       <p><h3>Unsere Geschäftstelle befindet sich hier:</h3></p>
       <p>Hilfestraße 5<br>90471 Nürnberg</p>

       <p><h4>Sie können Ihre Spende entweder direkt bei unserer Geschäftstelle abgeben
                oder Sie lassen Ihre Spende bequem von unserem Sammelfahrzeug bei Ihnen zu Hause abholen.
       </h4></p>
       
        <form> <!--das ist ein Formular, das aus einem input Element besteht,
            als Attribute: Art der Eingabe, Name unter welchem es ansprechbar ist, Platzhalter-->
            <P><label for="Abgabe">Abgabe:</label>
                <select id="Abgabe" name="Abgabe:" oninput="checkInput()">
                    <option value="">Bitte wählen</option>
                    <option value="geschäftsstelle">Übergabe an der Geschäftsstelle</option>
                    <option value="sammelfahrzeug">Abholung durch Sammelfahrzeug</option>
                </select>
            </P> 
          
            <P> <div id="AbholerContainer" class="hidden">
                <label for="Anrede">Anrede: </label>
                <select id="Anrede" name="Anrede">
                    <option value="">Bitte wählen</option>
                    <option value="Herr">Herr</option>
                    <option value="Frau">Frau</option>
                    <option value="Divers">Divers</option>
                </select>
            </P> 
           <p><input type="text" name="Nachname" id="Nachname" placeholder="Nachname">
            <input type="text" name="Vorname" id="Vorname" placeholder="Vorname">
            </p>
            <p><input type="email" name="email" id="email" placeholder="Email-Adresse"></p>
            <p><input type="text" name="Straße" id="Straße" placeholder="Straße">
                <input type="number" name="Hausnummer" id="Hausnummer" placeholder="Hausnummer">
            </p>
            <p><form onsubmit="vergleichen(event);">
                    <label for="Postleitzahl">Postleitzahl</label>
                     <input type="number" id="Postleitzahl" name="Postleitzahl" placeholder="Postleitzahl" required>
                    <button type="submit" id="Plz prüfen">Plz prüfen</button>
                </form>

                <input type="text" id="Ort" name="Ort" placeholder="Ort">
            </p>
            </div>

            <div id="AlleContainer" class="hidden">
        </form>    
            <P> <form id="dynamicForm">
                <label for="Kleiderart">Art der Kleidung: </label>
                <select id="Kleiderart" name="Kleiderart">
                    <option value="">Bitte wählen</option>
                    <option value="schuhe">Schuhe</option>
                    <option value="jacke">Jacken, Mäntel etc.</option>
                    <option value="hose">Hosen etc.</option>
                    <option value="oberteil">Pulli, Bluse, Hemden etc.</option>
                    <option value="kleider">Kleider, Röcke etc.</option>
                    <option value="hut">Kopfbedekungen (Hut, Mütze, Capy etc.)</option>
                </select>
            </form>
            </P>
        <form>    
            <p><label for="krisenregion">Wähle eine Krisenregion:</label>
                <select id="Krisenregion" title="TabelleKrisenregionen" name="Krisenregion"></select>
            </p>
        </div>
        <button type="submit" id="Kleiderspende registrieren">Kleiderspende registrieren</button>
         </form>
    </main>

<footer></footer>
<script>
    // Funktion zum Laden der Tabelle und Extrahieren der Werte
    async function loadTableData() {
        const response = await fetch('krisenregion.html');
        const text = await response.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(text, 'text/html');
        const rows = doc.querySelectorAll('#dataKrisenregion tr');
        const dropdown = document.getElementById('Krisenregion');

        for (let i = 1; i < rows.length; i++) {
                const cell = rows[i].cells[0];
                const option = document.createElement('option');
                option.textContent = cell.textContent;
                dropdown.appendChild(option);
        };
    }

    // Tabelle laden, wenn das Dokument geladen ist
    document.addEventListener('DOMContentLoaded', loadTableData);
</script>

<script> //Script zum optionalen Einblenden von Name und Adresse, jenachdem ob Geschäftstelle oder Abholung ausgewählt wurde
    function checkInput() {
        const AbgabeValue = document.getElementById('Abgabe').value;
        const AbholerContainer = document.getElementById('AbholerContainer');
        const AlleContainer = document.getElementById('AlleContainer');

        if (AbgabeValue === 'geschäftsstelle') {
            AlleContainer.classList.remove('hidden');
            AbholerContainer.classList.add('hidden');
        } else if (AbgabeValue === 'sammelfahrzeug') {
            AbholerContainer.classList.remove('hidden');
            AlleContainer.classList.remove('hidden');
        } else {
            AbholerContainer.classList.add('hidden');
            AlleContainer.classList.add('hidden');
        }
    }
</script>

<script>
    function vergleichen(event) {
        event.preventDefault();
        // Hole den Wert des Eingabefeldes
        let eingabe = document.getElementById("Postleitzahl").value;
        
        if (eingabe.length < 5 || eingabe.length > 5 ) {
            alert ("Bitte eine gültige Postleitzahl eingeben"); 
            return;
        }
        // Extrahiere die ersten zwei Zahlen
        let ersteZweiZahlen = eingabe.substring(0, 2);
        
        // Feste Werte zum Vergleichen
        let wert1 = "90";
        
        // Vergleiche und zeige entsprechende Meldung
        if (ersteZweiZahlen === wert1) {
            alert("Die angegebene Adresse liegt in der Nähe unserer Geschäftstelle. Bitte bringen Sie Ihre Spende direkt dorthin.");
        
        } else {
            alert("Das Sammelfahrzeug kommt zu Ihnen!");
        }
    }
    document.getElementById('Plz prüfen').addEventListener('click', vergleichen)
</script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('Kleiderspende registrieren').addEventListener('click', function(event) {
            event.preventDefault();
            // Erfasse die Eingabewerte
            const Anrede = document.getElementById('Anrede').value;
            const Nachname = document.getElementById('Nachname').value;
            const Vorname = document.getElementById('Vorname').value;
            const email = document.getElementById('email').value;
            const Straße = document.getElementById('Straße').value;
            const Hausnummer = document.getElementById('Hausnummer').value;
            const Postleitzahl = document.getElementById('Postleitzahl').value;
            const Ort = document.getElementById('Ort').value;
            // Erfasse den angezeigten Namen der ausgewählten Option im Dropdown-Feld 
            const Kleiderart = document.getElementById('Kleiderart');
            const selectedOption = Kleiderart.options[Kleiderart.selectedIndex].text;
            const Krisenregion = document.getElementById('Krisenregion').value;
            
            // Erfasse das aktuelle Datum und die Uhrzeit ohne Sekunden 
            const now = new Date(); 
            const options = { year: 'numeric', month: 'numeric', day: 'numeric', hour: 'numeric', minute: 'numeric' }; 
            const dateTimeString = now.toLocaleString('de-DE', options);

            // Erstelle eine neue Seite mit den Eingabewerten
            let newPageContent = '<h1>Übersicht der Eingaben</h1>';
            if (Anrede) {
                newPageContent += `<p><strong>Anrede:</strong> ${Anrede}</p>`;}
            if (Nachname) {
                newPageContent += `<p><strong>Nachname:</strong> ${Nachname}</p>`;}
            if (Vorname) {
                newPageContent += `<p><strong>Vorname:</strong> ${Vorname}</p>`;}
            if (email) {
                newPageContent += `<p><strong>E-Mail:</strong> ${email}</p>`;}
            if (Straße) {
                newPageContent += `<p><strong>Straße:</strong> ${Straße}</p>`;}
            if (Hausnummer) {
                newPageContent += `<p><strong>Hausnummer:</strong> ${Hausnummer}</p>`;}
            if (Postleitzahl) {
                newPageContent += `<p><strong>Postleitzahl:</strong> ${Postleitzahl}</p>`;}
            if (Ort) {
                newPageContent += `<p><strong>Ort:</strong> ${Ort}</p>`; }
            if (selectedOption) {
                newPageContent += `<p><strong>Kleiderart:</strong> ${selectedOption}</p>`;}
            if (Krisenregion) {
                newPageContent += `<p><strong>Krisenregion:</strong> ${Krisenregion}</p>`;}
            newPageContent += `<p><strong>Datum und Uhrzeit:</strong> ${dateTimeString}</p>`;

            // Öffne eine neue Seite und füge den Inhalt hinzu 
            const newWindow = window.open('', 'Ihre Zusammenfassung', 'width=600,height=600'); 
            newWindow.document.write(newPageContent); 
            newWindow.document.close();
        });
    });
</script>

  
  
</body>
</html>
